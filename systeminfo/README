--------------------------------------------------------------------------------
README
--------------------------------------------------------------------------------
        o
    ____|____
   |         |  Name   : systeminfo
   |  _   _  |  Type   : ansible role
   | [_] [_] |  Group  : app-admin
   |____~____|
    ___//__//   Authors: robomon community
   /|     |/    License: Simplified BSD License
  //|_____|
    _|| ||_     Webpage: http://www.robomon.org/
   (__| |__)
--------------------------------------------------------------------------------
DESCRIPTION
--------------------------------------------------------------------------------

This role manages systeminfo.

Use this role to provide general information about the managed node.

For more detailed information on the usage and available configuration options
please consult the following sections.

--------------------------------------------------------------------------------
USAGE
--------------------------------------------------------------------------------

INSTALL
  - hosts: all
    roles:
      - role: systeminfo
    vars:
      systeminfo_state: 'install'
      systeminfo_general: 'Data - Active/Passive Cluster'
      systeminfo_administration: ['This system is part of an active/passive cluster.',
                                  'Please bear in mind that switching roles causes short service interrupts.',
                                  'To get health information about the cluster, use the following commands:',
                                  'corosync-cfgtool -s',
                                  'crm status',
                                  'drbdadm role <drbd-resource>',
                                  'drbdadm dstate <drbd-resource>',
                                  'cat /proc/drbd',
                                  "ps -efH | grep -v grep | grep -iE 'corosync|drbd|pacemaker|httpd'",
                                  'service corosync status',
                                  'service drbd status',
                                  'service pacemaker status']
      systeminfo_services: ['Corosync (TCP/5404, TCP/5405)',
                            'DRBD/Kernel (TCP/7789)',
                            'Pacemaker',
                            'Floating service IP address (IPv4, IPv6)',
                            'MySQL DB Server (TCP/3306)',
                            'Apache HTTP Server (TCP/80, TCP/443)']
      systeminfo_patching: ['crm node standby <host.domain.tld>',
                            'yum update',
                            "wall 'WARNING: Reboot is required. System will reboot in 1 minute.'",
                            'shutdown -r +1',
                            "crm node online <host.domain.tld>"]

REMOVE
  - hosts: all
    roles:
      - role: systeminfo
    vars:
      systeminfo_state: 'remove'

INACTIVE
  - hosts: all
    roles:
      - role: systeminfo
    vars:
      systeminfo_state: 'inactive'

--------------------------------------------------------------------------------
VARIABLES
--------------------------------------------------------------------------------

ROLE
  systeminfo_state
    Description: Control the state of the role.
    Implemented: 0.1
    Required   : False
    Value      : Predetermined
    Type       : String
    Default    : 'install'
    Options    :
      Install : 'true' | 'yes' | 'install'
      Remove  : 'false' | 'no' | 'remove'
      Inactive: 'quiesce' | 'inactive'

  systeminfo_administration
    Description: Define the 'systeminfo_administration' option.
                 Use this variable to define important facts to be considered
                 while administrating the managed node.
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary
    Type       : Array
    Default    : []
    Options    :
      Examples: ['This system is part of an active/passive cluster.',
                 'Please bear in mind that switching roles causes short service interrupts.',
                 'To get health information about the cluster, use the following commands:',
                 'corosync-cfgtool -s',
                 'crm status',
                 'drbdadm role <drbd-resource>',
                 'drbdadm dstate <drbd-resource>',
                 'cat /proc/drbd',
                 "ps -efH | grep -v grep | grep -iE 'corosync|drbd|pacemaker|httpd'",
                 'service corosync status',
                 'service drbd status',
                 'service pacemaker status']
      None    : []

  systeminfo_general
    Description: Define the 'systeminfo_general' option.
                 Use this variable to define the general purpose of the managed
                 node.
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary
    Type       : String
    Default    : ''
    Options    :
      Examples: 'This system is the primary nameserver.'
      None    : ''

  systeminfo_other
    Description: Define the 'systeminfo_other' option.
                 Use this variable to define any other information about the
                 managed node.
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary
    Type       : Array
    Default    : []
    Options    :
      Examples: ['Some additional information about this system.',
                 'Please consult the wiki for more information.']
      None    : []

  systeminfo_patching
    Description: Define the 'systeminfo_patching' option.
                 Use this variable to define the procedure to patch the managed
                 node.
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary
    Type       : Array
    Default    : []
    Options    :
      Examples: ['crm node standby <host.domain.tld>',
                 'yum update',
                 "wall 'WARNING: Reboot is required. System will reboot in 1 minute.'",
                 'shutdown -r +1',
                 "crm node online <host.domain.tld>"]
      None    : []

  systeminfo_services
    Description: Define the 'systeminfo_services' option.
                 Use this variable to define the services installed and running
                 on the managed node.
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary
    Type       : Array
    Default    : []
    Options    :
      Examples: ['Corosync (TCP/5404, TCP/5405)',
                 'DRBD/Kernel (TCP/7789)',
                 'Pacemaker',
                 'Floating service IP address (IPv4, IPv6)',
                 'MySQL DB Server (TCP/3306)',
                 'Apache HTTP Server (TCP/80, TCP/443)']
      None    : []

--------------------------------------------------------------------------------
CONFLICTS
--------------------------------------------------------------------------------

ROLES

--------------------------------------------------------------------------------
DEPENDENCIES
--------------------------------------------------------------------------------

PACKAGES

ROLES
  common

VARIABLES

--------------------------------------------------------------------------------
REQUIREMENTS
--------------------------------------------------------------------------------

CONTROL MACHINE
  Ansible
    Version: >= 2.0

  Python
    Version: >= 2.4

  Python-Crypto
    Version: >= 2.0

  Python-Jinja2
    Version: >= 2.0

  Python-Paramiko
    Version: >= 1.0

  Python-YAML
    Version: >= 3.0

  sshpass
    Version: >= 1.0

MANAGED NODE
  Python
    Version: >= 2.4

--------------------------------------------------------------------------------
SUPPORT
--------------------------------------------------------------------------------

OPERATING SYSTEMS
  FreeBSD
    Version: 10.3-*
      Status: Testing

  OpenBSD
    Version: 5.9
      Status: Testing

--------------------------------------------------------------------------------
OTHER
--------------------------------------------------------------------------------
