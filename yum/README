--------------------------------------------------------------------------------
README
--------------------------------------------------------------------------------
        o
    ____|____
   |         |  Name   : yum
   |  _   _  |  Type   : ansible role
   | [_] [_] |  Group  : sys-apps
   |____~____|
    ___//__//   Authors: robomon community
   /|     |/    License: GNU General Public License version 2 (GPLv2)
  //|_____|
    _|| ||_     Webpage: http://www.robomon.org/
   (__| |__)
--------------------------------------------------------------------------------
DESCRIPTION
--------------------------------------------------------------------------------

This role manages yum.

Yum is a utility that can check for and automatically download and install
updated RPM packages. Dependencies are obtained and downloaded automatically,
prompting the user for permission as necessary.

For more detailed information on the usage and available configuration options
please consult the following sections.

--------------------------------------------------------------------------------
USAGE
--------------------------------------------------------------------------------

INSTALL
  - yum: all
    roles:
     - role: yum
       yum_state: 'install'

DISABLE
  - yum: all
    roles:
     - role: yum
       yum_state: 'disable'

CONFIG
  yum_default:
   - name: 'centos-os'
     state: 'true'
     comment: 'CentOS - OS'
     description: 'CentOS-$releasever - OS - $basearch'
     baseurl: 'http://mirror.switch.ch/ftp/mirror/centos/$releasever/os/$basearch/'
     enabled: '1'
     priority: '1'
     gpgcheck: '1'
     gpgkey: 'file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6'
     key:
      - name: 'RPM-GPG-KEY-CentOS-6'
        state: 'true'

   - name: 'centos-updates'
     state: 'true'
     comment: 'CentOS - Updates'
     description: 'CentOS-$releasever - Updates - $basearch'
     baseurl: 'http://mirror.switch.ch/ftp/mirror/centos/$releasever/updates/$basearch/'
     enabled: '1'
     priority: '1'
     gpgcheck: '1'
     gpgkey: 'file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6'
     key:
      - name: 'RPM-GPG-KEY-CentOS-6'
        state: 'true'

   - name: 'CentOS-Base'
     state: 'false'
     key:
      - state: 'false'

   - name: 'CentOS-Debuginfo'
     state: 'false'
     key:
      - state: 'false'

   - name: 'CentOS-Media'
     state: 'false'
     key:
      - state: 'false'

   - name: 'CentOS-Vault'
     state: 'false'
     key:
      - state: 'false'

  yum_custom:
   - name: 'epel-stable'
     state: 'true'
     comment: 'EPEL - Stable'
     description: 'Extra Packages for Enterprise Linux 6 - Stable - $basearch'
     baseurl: 'http://download.fedoraproject.org/pub/epel/6/$basearch'
     enabled: '1'
     priority: '1'
     gpgcheck: '1'
     gpgkey: 'file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-6'
     key:
      - name: 'RPM-GPG-KEY-EPEL-6'
        state: 'true'

   - name: 'epel'
     state: 'false'
     key:
      - state: 'false'

   - name: 'epel-testing'
     state: 'false'
     key:
      - state: 'false'

--------------------------------------------------------------------------------
VARIABLES
--------------------------------------------------------------------------------

CONFIG (yum)
  state
    Description: Control the 'state' of the YUM repository file.
    Implemented: 0.1
    Required   : False
    Value      : Predetermined
    Type       : String
    Default    : 'true'
    Options    :
      Create: 'true' | 'yes' | 'create'
      Remove: 'false' | 'no' | 'remove'

  name
    Description: Define the 'name' of the YUM repository.
                 For more details see 'man yum' or 'yum --help'.
    Implemented: 0.1
    Required   : True
    Value      : Arbitrary
    Type       : String
    Default    : "{{yum_name_default}}"
    Options    :
      Examples: 'centos-os' | 'centos-updates' | 'epel-stable'

  baseurl
    Description: Define the 'baseurl' of the YUM repository.
    Implemented: 0.1
    Required   : True
    Value      : Arbitrary
    Type       : String
    Default    : "{{yum_baseurl_default}}"
    Options    :
      Examples: 'http://mirror.centos.org/centos/$releasever/os/$basearch/' |
                'http://mirror.centos.org/centos/$releasever/updates/$basearch/' |
                'http://download.fedoraproject.org/pub/epel/6/$basearch'

  comment
    Description: Define a 'comment' for the YUM repository.
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary
    Type       : String
    Default    : "{{yum_comment_default}}"
    Options    :
      Examples: 'CentOS - OS' | 'CentOS - Updates' | 'EPEL - Stable'
      None     : ''

  description
    Description: Define the 'description' of the YUM repository.
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary
    Type       : String
    Default    : "{{yum_description_default}}"
    Options    :
      Examples: 'CentOS-$releasever - OS - $basearch' |
                'CentOS-$releasever - Updates - $basearch' |
                'Extra Packages for Enterprise Linux 6 - Stable - $basearch'
      None    : ''

  enabled
    Description: Set the 'enabled' option of the YUM repository.
    Implemented: 0.1
    Required   : False
    Value      : Predetermined
    Type       : Integer, String
    Default    : 1
    Options    :
      Enable : 'true' | 'yes' | 'enable' | 1
      Disable: 'false' | 'no' | 'disable' | 0

  exclude
    Description: Define the 'exclude' option of the YUM repository.
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary
    Type       : Array
    Default    : []
    Options    :
      Examples: ['mysql*', 'php*'] | ['puppet*', 'ruby*']
      None    : []

  gpgcheck
    Description: Set the 'gpgcheck' option of the YUM repository.
    Implemented: 0.1
    Required   : False
    Value      : Predetermined
    Type       : Integer, String
    Default    : 1
    Options    :
      Enable : 'true' | 'yes' | 'enable' | 1
      Disable: 'false' | 'no' | 'disable' | 0

  gpgkey
    Description: Define the 'gpgkey' option of the YUM repository.
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary
    Type       : String
    Default    : "{{yum_gpgkey_default}}"
    Options    :
      Examples: 'file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6' |
                'file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-6'
      None    : ''

  priority
    Description: Set the 'priority' option of the YUM repository.
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary (1-99)
    Type       : Integer
    Default    : 1
    Options    :
      Examples: 1 | 5 | 23 | 42 | 55

CONFIG (key)
  state
    Description: Control the 'state' of the RPM-GPG-KEY file.
    Implemented: 0.1
    Required   : False
    Value      : Predetermined
    Type       : String
    Default    : 'true'
    Options    :
      Create: 'true' | 'yes' | 'create'
      Remove: 'false' | 'no' | 'remove'

  name
    Description: Define the 'name' of the RPM-GPG-KEY file.
    Implemented: 0.1
    Required   : True
    Value      : Arbitrary
    Type       : String
    Default    : "{{yum_name_default}}"
    Options    :
      Examples: 'RPM-GPG-KEY-CentOS-6' | 'RPM-GPG-KEY-EPEL-6'

  source
    Description: Define the 'source' of the RPM-GPG-KEY file.
                 Any value other than 'main' requires a directory to be created.
                 The custom directory for an example configuration called
                 'example' needs to be created as follows:
                 'yum/files/example/'
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary
    Type       : String
    Default    : 'main'
    Options    :
      Examples: 'distribution' | 'vendor' | 'product'

ROLE
  yum_state
    Description: Control the state of the role.
    Implemented: 0.1
    Required   : False
    Value      : Predetermined
    Type       : String
    Default    : 'install'
    Options    :
      Install: 'true' | 'yes' | 'install'
      Disable: 'false' | 'no' | 'disable'

  yum_baseurl_default
    Description: Define the 'yum_baseurl_default' option.
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary
    Type       : String
    Default    : ''
    Options    :
      Examples: 'http://mirror.domain.tld/yum/dummy/6/stable/$basearch' |
                'http://mirror.domain.tld/yum/example/6/stable/$basearch'

  yum_comment_default
    Description: Define the 'yum_comment_default' option.
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary
    Type       : String
    Default    : 'Default comment'
    Options    :
      Examples: 'Dummy repository' | 'Example repository'

  yum_description_default
    Description: Define the 'yum_description_default' option.
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary
    Type       : String
    Default    : 'Default description'
    Options    :
      Examples: 'Dummy repository - Stable - $basearch' |
                'Example repository - Stable - $basearch'

  yum_gpgkey_default
    Description: Define the 'yum_gpgkey_default' option.
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary
    Type       : String
    Default    : ''
    Options    :
      Examples: 'file:///etc/pki/rpm-gpg/RPM-GPG-KEY-Dummy' |
                'file:///etc/pki/rpm-gpg/RPM-GPG-KEY-Example'

  yum_key_config_file
    Description: Define the file source for the 'RPM-GPG-KEY-Name'.
                 Any value other than 'main' requires a file to be created.
                 The custom file for an example configuration called 'example'
                 needs to be placed as follows:
                 'yum/files/example/RPM-GPG-KEY-Name'
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary
    Type       : String
    Default    : 'main'
    Options    :
      Examples: 'distribution' | 'vendor' | 'product'

  yum_name_default
    Description: Define the 'yum_name_default' option.
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary
    Type       : String
    Default    : 'default'
    Options    :
      Examples: 'dummy' | 'example'

  yum_yum_conf_template
    Description: Define the template source for 'yum.conf.j2'.
                 Any value other than "{{ansible_os_family}}" requires a Jinja2 file to be
                 created. The custom Jinja2 file for an example configuration
                 called 'example' needs to be placed as follows:
                 'yum/templates/example/yum.conf.j2'
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary
    Type       : String
    Default    : "{{ansible_os_family}}"
    Options    :
      Examples: 'example' | 'environment' | 'hostname'

  yum_yum_config_template
    Description: Define the template source for 'yum-config.j2'.
                 Any value other than 'main' requires a Jinja2 file to be
                 created. The custom Jinja2 file for an example configuration
                 called 'example' needs to be placed as follows:
                 'yum/templates/example/yum-config.j2'
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary
    Type       : String
    Default    : 'main'
    Options    :
      Examples: 'example' | 'environment' | 'hostname'

--------------------------------------------------------------------------------
DEPENDENCIES
--------------------------------------------------------------------------------

PACKAGES
  yum
    Version: >= 3.2
    Name   :
      RedHat 6: 'yum'
      CentOS 6: 'yum'

ROLES
  yum_plugin_security

  yum_utils

VARIABLES

--------------------------------------------------------------------------------
REQUIREMENTS
--------------------------------------------------------------------------------

CONTROL MACHINE
  Ansible
    Version: >= 1.6

  Python
    Version: >= 2.4

  Python-Crypto
    Version: >= 2.0

  Python-Jinja2
    Version: >= 2.0

  Python-Paramiko
    Version: >= 1.0

  Python-YAML
    Version: >= 3.0

  sshpass
    Version: >= 1.0

MANAGED NODE
  Python
    Version: >= 2.4

--------------------------------------------------------------------------------
SUPPORT
--------------------------------------------------------------------------------

OPERATING SYSTEMS
  RedHat
    Version: 6
      Status: Testing

    Version: 7
      Status: Planned

  CentOS
    Version: 6
      Status: Testing

    Version: 7
      Status: Planned

  Gentoo:
    Version: 2
      Status: Unsupported

--------------------------------------------------------------------------------
OTHER
--------------------------------------------------------------------------------
