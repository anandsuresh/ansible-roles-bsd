--------------------------------------------------------------------------------
README
--------------------------------------------------------------------------------
        o
    ____|____
   |         |  Name   : openssh
   |  _   _  |  Type   : ansible role
   | [_] [_] |  Group  : net-misc
   |____~____|
    ___//__//   Authors: robomon community
   /|     |/    License: Simplified BSD License
  //|_____|
    _|| ||_     Webpage: http://www.robomon.org/
   (__| |__)
--------------------------------------------------------------------------------
DESCRIPTION
--------------------------------------------------------------------------------

This role manages openssh.

SSH (Secure SHell) is a program for logging into and executing commands on a
remote machine. SSH is intended to replace rlogin and rsh, and to provide secure
encrypted communications between two untrusted hosts over an insecure network.
X11 connections and arbitrary TCP/IP ports can also be forwarded over the secure
channel.
OpenSSH is OpenBSD's version of the last free version of SSH, bringing it up to
date in terms of security and features.

For more detailed information on the usage and available configuration options
please consult the following sections.

--------------------------------------------------------------------------------
USAGE
--------------------------------------------------------------------------------

INSTALL
  - hosts: all
    roles:
     - role: openssh
       openssh_state: 'install'

ENABLE
  - hosts: all
    roles:
     - role: openssh
       openssh_state: 'enable'
       openssh_allow_users:
        - 'user01'
        - 'user02'
        - 'user03'
       openssh_password_authentication: 'no'
       openssh_listen_address:
        - '0.0.0.0'

DISABLE
  - hosts: all
    roles:
     - role: openssh
       openssh_state: 'disable'
       openssh_allow_users:
        - 'user01'
        - 'user02'
        - 'user03'
       openssh_password_authentication: 'no'
       openssh_listen_address:
        - '0.0.0.0'

REMOVE
  - hosts: all
    roles:
     - role: openssh
       openssh_state: 'remove'

INACTIVE
  - hosts: all
    roles:
     - role: openssh
       openssh_state: 'inactive'

--------------------------------------------------------------------------------
VARIABLES
--------------------------------------------------------------------------------

ROLE
  openssh_state
    Description: Control the state of the role.
                 'openssh' is a core package and can therefore not be removed.
                 'openssh' is a core service and should therefore not be
                 disabled.
    Implemented: 0.1
    Required   : False
    Value      : Predetermined
    Type       : String
    Default    : 'enable'
    Options    :
      Install : 'true' | 'yes' | 'install'
      Enable  : 'start' | 'on' | 'enable'
      Disable : 'stop' | 'off' | 'disable'
      Remove  : 'false' | 'no' | 'remove'
      Inactive: 'quiesce' | 'inactive'

  openssh_address_family
    Description: Set the 'openssh_address_family' option.
    Implemented: 0.1
    Required   : False
    Value      : Predetermined
    Type       : String
    Default    : 'any'
    Options    :
      IPv4/IPv6: 'any' | 'ANY' | 'all' | 'ALL'
      IPv4     : 'inet' | 'ipv4'
      IPv6     : 'inet6' | 'ipv6'

  openssh_match
    Description: Define the 'openssh_match' option.
    Implemented: 0.7
    Required   : False
    Value      : Arbitrary
    Type       : Array/Hash
    Default    : []
    Options    :
      Examples: [{name: 'sftpuser', type: 'User', config: {'ChrootDirectory': '/opt/sftp', 'ForceCommand': 'internal-sftp'}},
                 {name: 'sftpgroup', type: 'Group', config: {'ChrootDirectory': '/opt/sftp', 'ForceCommand': 'internal-sftp'}}]
      None    : []

  openssh_allow_groups
    Description: Define the 'openssh_allow_groups' option.
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary
    Type       : Array
    Default    : []
    Options    :
      Examples: ['group1', 'group2', 'group3']
      None    : []

  openssh_allow_users
    Description: Define the 'openssh_allow_users' option.
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary
    Type       : Array
    Default    : []
    Options    :
      Examples: ['user1', 'user2', 'user3']
      None    : []

  openssh_banner
    Description: Control the 'openssh_banner' option.
    Implemented: 0.1
    Required   : False
    Value      : Predetermined
    Type       : String
    Default    : 'enable'
    Options    :
      Enable : 'true' | 'yes' | 'enable'
      Disable: 'false' | 'no' | 'disable'

  openssh_banner_templatea
    Description: Define the template source for 'banner.j2'.
                 Any value other than 'main' requires a Jinja2 file to be
                 created. The custom Jinja2 file for an example configuration
                 called 'example' needs to be placed as follows:
                 'openssh/templates/example/banner.j2'
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary
    Type       : String
    Default    : 'main'
    Options    :
      Examples: 'example' | 'environment' | 'hostname'

  openssh_compression
    Description: Control the 'openssh_compression' option.
    Implemented: 0.1
    Required   : False
    Value      : Predetermined
    Type       : String
    Default    : 'delayed'
    Options    :
      Enable : 'true' | 'yes' | 'enable'
      Disable: 'false' | 'no' | 'disable'
      Delayed: 'delayed'

  openssh_deny_groups
    Description: Define the 'openssh_deny_groups' option.
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary
    Type       : Array
    Default    : []
    Options    :
      Examples: ['group1', 'group2', 'group3']
      None    : []

  openssh_deny_users
    Description: Define the 'openssh_deny_users' option.
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary
    Type       : Array
    Default    : []
    Options    :
      Examples: ['user1', 'user2', 'user3']
      None    : []

  openssh_listen_address
    Description: Define the 'openssh_listen_address' option.
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary
    Type       : Array
    Default    : ['0.0.0.0']
    Options    :
      Examples: ['0.0.0.0' | '127.0.0.1', '::', '::1'] |
                ['192.168.1.1', '2001:0ec9:96b4:19e4:2421:9b3f:1480:8458']

  openssh_password_authentication
    Description: Control the 'openssh_password_authentication'
                 option.
    Implemented: 0.1
    Required   : False
    Value      : Predetermined
    Type       : String
    Default    : 'yes'
    Options    :
      Enable : 'true' | 'yes' | 'enable'
      Disable: 'false' | 'no' | 'disable'

  openssh_permit_root_login
    Description: Control the 'openssh_permit_root_login' option.
    Implemented: 0.1
    Required   : False
    Value      : Predetermined
    Type       : String
    Default    : 'no'
    Options    :
      Enable : 'true' | 'yes' | 'enable'
      Disable: 'false' | 'no' | 'disable'

  openssh_port
    Description: Define the 'openssh_port' option.
    Implemented: 0.2
    Required   : False
    Value      : Arbitrary
    Type       : String
    Default    : ['22']
    Options    :
      Examples: ['22'] | ['22', '222'] | ['22', '8022']

  openssh_print_motd
    Description: Control the 'openssh_print_motd' option.
    Implemented: 0.1
    Required   : False
    Value      : Predetermined
    Type       : String
    Default    : 'yes'
      Gentoo : 'no'
      Default: 'yes'
    Options    :
      Enable : 'true' | 'yes' | 'enable'
      Disable: 'false' | 'no' | 'disable'

  openssh_print_last_log
    Description: Control the 'openssh_print_last_log' option.
    Implemented: 0.1
    Required   : False
    Value      : Predetermined
    Type       : String
    Default    : 'yes'
    Options    :
      Enable : 'true' | 'yes' | 'enable'
      Disable: 'false' | 'no' | 'disable'

  openssh_pubkey_authentication
    Description: Control the 'openssh_pubkey_authentication'
                 option.
    Implemented: 0.1
    Required   : False
    Value      : Predetermined
    Type       : String
    Default    : 'yes'
    Options    :
      Enable : 'true' | 'yes' | 'enable'
      Disable: 'false' | 'no' | 'disable'

  openssh_rsa_authentication
    Description: Control the 'openssh_rsa_authentication' option.
    Implemented: 0.1
    Required   : False
    Value      : Predetermined
    Type       : String
    Default    : 'yes'
    Options    :
      Enable : 'true' | 'yes' | 'enable'
      Disable: 'false' | 'no' | 'disable'

  openssh_ssh_config_template
    Description: Define the template source for 'ssh_config.j2'.
                 Any value other than "{{ansible_os_family}}" requires a Jinja2
                 file to be created. The custom Jinja2 file for an example
                 configuration called 'example' needs to be placed as follows:
                 'openssh/templates/example/ssh_config.j2'
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary
    Type       : String
    Default    : "{{ansible_os_family}}"
    Options    :
      Examples: 'example' | 'environment' | 'hostname'

  openssh_sshd_config_template
    Description: Define the template source for 'sshd_config.j2'.
                 Any value other than "{{ansible_os_family}}" requires a Jinja2
                 file to be created. The custom Jinja2 file for an example
                 configuration called 'example' needs to be placed as follows:
                 'openssh/templates/example/sshd_config.j2'
    Implemented: 0.1
    Required   : False
    Value      : Arbitrary
    Type       : String
    Default    : "{{ansible_os_family}}"
    Options    :
      Examples: 'example' | 'environment' | 'hostname'

  openssh_tcp_keep_alive
    Description: Control the 'openssh_tcp_keep_alive' option.
    Implemented: 0.1
    Required   : False
    Value      : Predetermined
    Type       : String
    Default    : 'yes'
    Options    :
      Enable : 'true' | 'yes' | 'enable'
      Disable: 'false' | 'no' | 'disable'

  openssh_use_dns
    Description: Control the 'openssh_use_dns' option.
    Implemented: 0.3
    Required   : False
    Value      : Predetermined
    Type       : String
    Default    : 'no'
    Options    :
      Enable : 'true' | 'yes' | 'enable'
      Disable: 'false' | 'no' | 'disable'

  openssh_x11_forwarding
    Description: Control the 'openssh_x11_forwarding' option.
    Implemented: 0.1
    Required   : False
    Value      : Predetermined
    Type       : String
    Default    : 'no'
    Options    :
      Enable : 'true' | 'yes' | 'enable'
      Disable: 'false' | 'no' | 'disable'

  openssh_x11_use_localhost
    Description: Control the 'openssh_x11_use_localhost' option.
    Implemented: 0.1
    Required   : False
    Value      : Predetermined
    Type       : String
    Default    : 'yes'
    Options    :
      Enable : 'true' | 'yes' | 'enable'
      Disable: 'false' | 'no' | 'disable'

--------------------------------------------------------------------------------
CONFLICTS
--------------------------------------------------------------------------------

ROLES

--------------------------------------------------------------------------------
DEPENDENCIES
--------------------------------------------------------------------------------

PACKAGES
  openssh
    Version: >= 5.3
    Name   :
      Gentoo 2: 'openssh'

ROLES

VARIABLES

--------------------------------------------------------------------------------
REQUIREMENTS
--------------------------------------------------------------------------------

CONTROL MACHINE
  Ansible
    Version: >= 1.6

  Python
    Version: >= 2.4

  Python-Crypto
    Version: >= 2.0

  Python-Jinja2
    Version: >= 2.0

  Python-Paramiko
    Version: >= 1.0

  Python-YAML
    Version: >= 3.0

  sshpass
    Version: >= 1.0

MANAGED NODE
  Python
    Version: >= 2.4

--------------------------------------------------------------------------------
SUPPORT
--------------------------------------------------------------------------------

OPERATING SYSTEMS
  FreeBSD
    Version: 10
      Status: Testing

  Gentoo
    Version: 2
      Status: Testing

--------------------------------------------------------------------------------
OTHER
--------------------------------------------------------------------------------
